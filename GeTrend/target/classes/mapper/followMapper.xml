<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.yeollu.getrend.user.dao.FollowMapper">

<!-- 내가 구독하겠다 = 팔로잉 -->
<insert id="insertFollow" parameterType="follow">
insert into 
	follows(
	user_email
	, follows_following
	) 
	values(
	#{user_email}
	,#{follows_following}
	)
</insert>
<!-- 구독 취소 -->
<delete id="deleteFollow" parameterType="follow">
delete from
	follows 
where 
	user_email = #{user_email}
and 
	follows_following = #{follows_following}
</delete>

<!--내가 팔로우한사람인지 확인 -->
<select id="checkFollow" parameterType="follow" resultType="int">
select
	count(*)
from
	follows
where
	user_email = #{user_email}
and
	follows_following = #{follows_following}
</select>


<!-- 나를 구독한 사람수 -->
<select id="countFollower" parameterType="string" resultType="int">
select 
	count(user_email) 
from
	follows
where 
	follows_following = #{follows_following}
</select>

<!-- 내가 구독한 사람수 -->
<select id="countFollow" parameterType="string" resultType="int">
select 
	count(follows_following) 
from
	follows
where 
	user_email = #{user_email}
</select>

<!--내가 팔로우한사람 리스트 -->
<select id="selectFollowing" parameterType="string" resultType="follow">
select
	follows_following
from
	follows
where
	user_email = #{user_email}
</select>

<!--나를 팔로우한사람 리스트 -->
<select id="selectFollow" parameterType="string" resultType="follow">
select
	user_email
from
	follows
where
	follows_following = #{follows_following}
</select>

</mapper>

